## 절차형 SQL
- 저장 프로시저: stored procedure , 데이터베이스에 대한 일련의 작업을 정리한 절차를 관계형 데이터베이스 관리 시스템에 저장한 모듈
- 트리거: 테이블에 대한 이벤트에 반응해 자동으로 실행되는 작업(재고관리에 많이 사용됨)
- 행트리거(for each row), 문장트리거(단 한 번만 실행) / after, before
- 사용자 정의함수: 리턴타입 

- 데이터베이스의 특징 : 공유데이터, 저장데이터, 통합데이터, 운영데이터


## 병행제어와 데이터 전환
- 병행제어의 목적 : db 일관성을 유지시켜서 무결성있는 데이터 만들기
- 병행제어의 문제점: 갱신분실, 모순성(inconsistency), 연쇄복귀(cascading rollback), 비완료 의존성
- 병행제어 기법(로낙타다): 로킹(locking)-로킹단위, 2단계 로킹규약(확장-lock,축소-unlock), 타임스탬프 기법, 낙관적 병행제어, 다중버전 병행제어기법
- 회복: 트랜잭션 장애, 시스템 장애, 미디어 장애
- undo: 오류와 관련된 모든 변경을 취소하여 복구
- redo : 오류가 발생한 트랜잭션을 재실행하여 복구
- 회복기법
  - 로그기반 회복기법: 지연갱신 회복기법(undo 필요없음, redo), 즉시갱신 회복기법(undo 필요, redo)
  - 검사점 회복기법: 체크포인트 회복기법-검사점 이후에 처리된 트랜잭션은 회복작업 수행
  - 그림자 페이징 회복 기법: 그림자(복사본) 만들어두고 장애 발생시 복사본에 엎어침
  - 미디어 회복 기법: 별도의 저장 장치에 덤프
  - ARIES 회복기법: 알고리즘 이용, 분석-REDO-UNDO 단계
  
  
## 병행제어와 데이터 전환(안중요)
- ETL: 데이터를 추출하여 적합한 형식과 내용으로 변환한 후 목적 시스템에 적재하는 일련의 과정(마이그레이션)
- Extraction(추출), transformation(변환), load(적재)
- 데이터 전환 게획-> 데이터 전환 설계-> 데이터 전환 개발 -> 데이터 전환 테스트 및 검증 -> 데이터 전환
- 데이터 웨어하우스에 적재하는 모든 과정
- 데이터 품질 관리 대상: 데이터 값, 구조, 프로세스
- DA: 데이터 관리 책임자/ DBA: 데이터베이스 관리자



## grant & revoke
1. grant (권한) on 테이블 to (누구)
2. revoke(권한) on 테이블 from(누구)
3. revoke select on department from x1
4. with grant option(권한을 받은 사용자는 다른 사람에게 권한을 줄 수 있다.) / CASCADD


## DML
1. INSERT INTO EMP(USER_NO, USER_NAME) VALUES('001', 'USER1');
2. UPDATE EMP SET USER_NAME='이흥직' WHERE USER_NO='1000';
3. UPDATE STUDENT SET GRADE = GRADE+1;
4. UPDATE STUDENT SET GRADE=GRADE+1 WHERE SNO='1000';
5.  DELETE FROM EMP WHERE USER_NO='1000';
6. DELETE FROM STUDENT WHERE GRADE >= '6';
7. SELECT * FROM 성정 WHERE (점수 >= 90 AND 점수 <= 95) AND 학과='컴퓨터학과';
8. SELECT 이름, 급여 FROM 직원 WHERE 급여>='10000000';
9. SELECT 학번, 학생명 FROM 학적 WHERE 전화번호 IS NULL;
10. SELECT DISTINCT 학과 FROM 학생;
11. SELECT 과목번호, 과목이름 R1,R2 WHERE R1.학번=R2.학번 AND R1.학과='전자공학' AND R1.이름='강남길';
 1 2 3
 1 2 4
 4 2 3
 4 2 4
 7 8 NULL
12. 레프트 아우터 조인은 레프트를 기준으로 다 나와야 함. 빈칸은 null로 채워주면 된다.
13. SELECT NAME, ADDR FROM COMPANY WHERE 소재지='서울' OR 소재지='수원'
14. SELECT NAME, ADDR FROM COMPANY WHERE 소재지 IN('서울', '수원')
15. EXISTS
16. SELECT 성명, AVG(점수) FROM 성적 GROUP BY 성명;
17. SELECT COUNT(*) FROM STUDENT GROUP BY SUBJECT HAVING COUNT(*) > 2;

## 마무리
1. 데이터베이스의 정의 - 공장통운
2. DDL/ DML/ DCL
3. 스키마: 데이터베이스 구조와 제약조건에 관해 전반적인 명세를 기술한 것
4. 외부스키마: 사용자가 보는 관점,논리적 구조, 개념스키마: 전반적인 구조와 제약조건,전체적인 논리적 구조, 내부스키마: 물리적 저장장치의 입장에서 본 구조
5. 논리적 독립성/물리적 독립성
6. 애트리뷰트 속성 : 단일값 속성, 다중값 속성, 단순 속성(의미를 더는 분해할 수 없는 속성), 복합 속성, 유도 속성, 널 속성, 키속성
7. 관계: 서로 다른 개체가 맺고 있는 의미 있는 연광성데이
8. 데이터 모델의 품질 기준 : 정확성, 완전성, 준거성, 최신성, 일관성
9. 데이터베이스 정규화: 원부이결다조
10. 데이터베이스 이중화 목적 : 고가용성을 위해서(eager기법, lazy기법)
11. 데이터베이스 이중화의 종류(active-active, acvive standby)
12. 백업: 트랜잭션 로그백업(redo, undo)
13. 복구시간목표(RTO-손실시간, RPO-손실량)
14. API 방식(프로그램이 암호화), 플러그인(돈주고 사는 것), TDE(데이터베이스가 기본적으로 제공하는 암호모듈), 파일암호화, 하드웨어 : 데이터베이스 암호화 방식

15. 파티셔닝 - 수평분할, 수직분할
16. 클러스터 - 자주 사용되는 데이터를 같은 위치에 저장시키는 방법
17. 인덱스 : 추가적인 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조
18. 밀집인덱스, 희소 인덱스
19. 인덱스의 구조: 트리기반, 비트맵, 함수기반, 비트맵 조인, 도메인
20. 뷰 - 하나이상의 기본테이블로부터 유도된 이름을 가지는 가상의 테이블
21. 시스템 카탈로그, 파일 디스크립터 , PCB - 문맥교환

22 restrict, cascade
문제가 되는 연산 거절, 부모 릴레이션에서 튜플을 삭제하면 자식 릴레이션에서 튜플을 참조하는 튜플도 연쇄삭제
23. 도메인 무결성: 속성들의 값은 정의된 도메인에 속한 값이어야 한다.
24 . CRUD
25. 옵티마이저 SQL 추출 단계 -> (구문분석> 실행> 인출) > 결과
   - 옵티마이저 : 사용자가 질의한 SQL문에 대해 최적의 실행 방법을 결정하는 역할 수행. => 인덱스
   - 옵티마이저 : 규칙기반, 비용기반
26. 튜닝 : SQL문을 최적화하여 빠른 시간 내에 원하는 결과값을 얻기 위한 작업
27. 분산데이터베이스
  - 여러 곳으로 분산되어 있는 데이터베이스를 하나의 가상 시스템으로 사용할 수 있도록 하는 데이터베이스
  - 분산처리기, 분산데이터베이스, 통신네트워크가 구성요소
  - 분석요약, 통합요약
  - 투명성: 위치투명성, 분할투명성, 중복투명성, 병행투명성, 장애투명성


28. cAP 이론 (일관성, 가용성, 분단허용성 중에 2가지만 만족)
29. 트랜잭션: 데이터베이스의 상태를 변환시키는 하나의 논리적인 기능을 수행하는 작업단위

트랜잭션의 상태(활동, 실패, 철회, 부분완료, 완료)
저장프로시저 CREATE OR REPLACE  / IS / BEGIN /
트리거 : 테이블에 대한 이벤트에 반응해 자동으로 실행되는 작업
행트리거 : FOR EACH ROW
문장트리거
사용자 정의함수: 리턴값이 하나
공유데이터, 저장데이터, 통합데이터, 운영데이터 ==> 공유를 하고 있기 때문에 병행을 제어해줘야 함, 문제점이 발생할 수 있음.
병행제어: 갱신분실(일부가 없어짐), 비완료 의존성, 모순성. 연쇄복구
병행제어 기법
로킹: 트랜잭션이 어떤 데이터에 접근하고자 할 때 로킹 수행, 로킹단위는 모두가 될 수 있음.
2단계 로킹규약: 확장/축소단계가 있음. 
타임 스탬프: 데이터에 접근하느 ㄴ시간을 미리 정해서 정해진 시간의 순서대로 데이터에 접근하여 수행
낙관적 병행제어
다중버전 병행제어: 타임스탬프를 여러개
회복 : UNDO(취소), REDO(재실행)
회복기법.
로그기반 회복기법: 지연갱신 회복기법, 즉시갱신 
그림자 페이징 회복 기법
미디어 회복 기법
ARIES 회복기법(알고리즘 이용)

