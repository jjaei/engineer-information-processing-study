## 운영체제 기초
- 기억장치의 종류: 보조기억장치(HDD, SSD) / 메인메모리(주기억장치) / 캐시 /  레지스터
- 레지스터 : 중장처리장치 내부에 존재, 고가, 속도가 빠름
- 캐시메모리: 속도차이 줄임, 명령어와 데이터를 일시적으로 저장
- 주기억장치: 직접 데이터를 읽고 쓸 수 있는 장치, 기억용량 큼
  - ROM : 읽기만 가능한 비휘발성 메모리
  - RAM : 기억장소를 임의로 접근할 수 있는 메모리, 읽쓰 가능한 휘발성 메모리
    - SRAM : 전원이 공급되는 중에 내용 사라지지 않음(캐시 메모리로 사용) 
    - DRAM : 일반적인 주기억장치, 시간이 지나면 내용이 사라짐
- 보조기억장치: 기억용량 크지만 접근 시간은 느림.
- 연관메모리 : 주소에 의해 접근하지 않고 기억된 **내용의 일부를 이용**하여 접근하는 기억장치 -> 정보 검색 빠름
- 시스템 소프트웨어 : 응용 소프트웨어를 실행하기 위한 플랫폼 제공
  - 로더: 해당 목적프로그램을 메모리에 적재하고 배치 주소를 옮기는 프로그램
  - 링커: 목적파일을 실행파일로 변환해주는 프로그램
  - 유틸리티: 응용 소프트웨어를 관리하는데 도움을 주는 프로그램
  - 번역기(컴파일러, 어셈블러) : 특정 프로그래밍 언어로 쓰인 문서를 다른 프로그래밍 언어로 옮기는 프로그램
  - 장치 드라이버
  - 운영체제: CPU, 메모리, 입출력장치, 하드디스크, 네트워크 등등 여러 가지를 관리
1. 시스템 소프트웨어의 구성
  - 제어 프로그램(작감데)
    - 감시 프로그램: 각종 프로그램의 실행과 시스템 **전체의 작동상태**를 감시/감독하는 프로그램
    - 작업관리 프로그램: 연속처리를 위한 **스케줄 및 시스템 자원할당** 등 담당
    - 감시 프로그램: 각종 프로그램의 실행과 시스템 **전체의 작동상태**를 감시/감독하는 프로그램
    - 데이터관리 프로그램: 자료전송, 파일의 조작 및 처리, 입출력 자료와 프로그램 간의 논리적 연결 등을 처리할 수 있도록 관리
  - 처리 프로그램: 서비스 프로그램, 문제 프로그램, 언어번역 프로그램
2. 운영체제: 컴퓨터 내부 동작을 관리하는 소프트웨어(cpu,ram, 네트워크, 보안, 로깅)
  - 하드웨어 > 운영체제 > 유틸리티 > 응용프로그램 > 사용자
  - 운영체제의 기능: 프로세스 관리, 메모리 관리, 파일관리, 입출력 관리, 보조기억장치 관리, 네트워킹, 정보보안관리, 명령해석
  - 운영체제 운용기법: 일괄처리 시스템(batch processing), 실시간 처리 시스템(real time), 다중 프로그래밍 시스템(multi programming), 시분할 시스템(time sharing), 다중 처리 시스템, 다중 모드 시스템(혼용사용),분산처리 시스템(distribute)
  - 운영체제 성능평가 기준: 처리량(시스템이 처리하는 일의 양), 반환시간(결과 돌려줄때까지 소요되는 시간), 신뢰도, 사용가능도
3. 운영체제의 종류
  - 윈도우: 마이크로소프트, MS-DOS의 멀티태스킹 기능과 GUI 환경을 제공하는 운영체제
    - GUI 제공, 선점형 멀티태스킹 방식, 플러그앤 플레이, OLE
  - 리눅스: 1991년 리누스 토발즈, 오픈소스로 개발된 유닉스 호환 OS
    - 다중사용자 시스템, 오픈소스, 파일시스템, C언어로 개발되어 이식성, 유연성, 확장성, 다양한 배포판
  - **유닉스**: 미국 AT&T 벨연구소가 개발한 공개형 오픈소스 운영체제
    - 시분할시스템을 위해 설계된 대화된 운영체제, 대부분 C언어로 작성되어 이식성, 호환성 높음
    - 다중사용자, 다중작업 지원, 통신망 관리용 운영체제로 적합, 트리구조
  - 하드웨어>커널(실제 수행하는 것)>쉘(명령어 해석해서 커널에게 전달함)>유틸리티>사용자
  - 커널: 유닉스의 가장 핵심적인 부분. 입출력관리, 프로세스간 통신, CPU 스케줄링 등을 수행
  - 쉘: 명령어 해석기, 시스템과 사용자간의 인터페이스 담당
- 유닉스 파일 시스템(구조) : 부트블록, 슈퍼블록, I-node 블록, 데이터블록
- 파일디스크립터(File Descriptor): 파일제어블록, 파일 관리를 위해 시스템이 필요로 하는 정보를 가짐, 운영체제가 파일을 만들기 위해서 관리함. 보조에 저장되어 있다가 파일이 오픈되면 주기억자잋로 이동됨. 사용자가 직접참조 불가능
- posix: 이식 가능한 운영체제 인터페이스, ieee가 책정한 인터페이스 규격
- macOS: 애플사가 개발한 유닉스 기반의 운영체제, 해킨토시
- 유닉스 주요 명령어 알아두기
-  리눅스/ 유닉스 파일 접근 권한관리
 - - (사용자, 소유주)  (그룹)  (other)
 - r(read,4, 읽기 권한), w(write,2, 쓰기 권한), x(실행권한,1) -권한없음(0)  >> 8진수
 - chmod0751 file명 >> 751에 대한 권한을 준다. (rwx  r-x  --x) >>> 소유주는 읽기, 쓰기, 실행 권한이 있고 그룹은 읽기와 실행 권한이 있고 나머지는 실행 권한만 있다.
 - chmod 0775 file명 >> 권한변경 명령어
 - umask (접근권한 마스크) : 유닉스에서 기본적으로 파일은 666 권한, 디렉토리는 777 권한을 가진다. 유마스크에서 022로 설정했다면 앞으로 파일 권한은 666 - 022 = **644**가 기본이 된다. 디렉토리는 기본으로 755 권한을 가지게 된다. (빼면 됨, 제거될 권한)  >> umask 022 <<
 - chown(소유주 변경) chown kim file 명 : 해당 파일의 소유주를 kim으로 변경



## 메모리 관리
1. 기억장치 관리 관리전략 : 반입전략(Fetch): 요구반입, 예상반입 - > 배치전략(placement):새로 반입되는 프로그램이나 데이터를 주기억장치의 어디에 위치시킬 것인지 ? 최초적합, 최적적합, 최악적합, first fit, best fit, worst fit -> 교체전략(이미 사용되고 있는 영역 중에서 어느 영역을 교체하여 사용할 것인지 결정하는 전략)
2. 주기억장치 할당기법 : 단일 분할 할당기법(사용시 한순간에는 오직 한 명의 사용자만이 주기억장치의 사용자영역을 사용하는 기법, 오버레이, 스와핑), 다중분할 할당기법(여러개의 프로그램을 동시에 올라갈 수 있게 하는 거, 고정분할할당기법, 가변분할 할당기법)
3. 단편화: 주기억장치에 프로그램을 할당하고 반납하는 과정에서 발생하는 사용되지 않는 작은 조각공간
4. 내부 단편화(주기억장치가 더 커서 사용되지 않고 남는 공간)/외부단편화(프로그램이 더 커서 사용되지 않고 남는 공간)
5. 단편화 해결방법: 통합기법(인접하다면 하나의 공간으로 만듦) / 압축기법(멀리있는 것까지 가져와서 커다란 공간으로 만들어줌-가비지컬렉션 작업) / 재배치기법(압축 실행할 때 주소 새롭게 지정해줌)


## 가상기억장치
1. 가상기억장치: 보조기억장치의 일부를 주기억장치처럼 사용하는 것
2. 블록분할방법 
  - 페이징기법 : 내부 단편화 발생, 고정된 크기로 나눔 > 주소 변환을 위해서 페이지 맵테이블 필요
  - 세그멘테이션 기법: 가변분할, 외부 단편화 발생

3. 페이지 부재: 프로세스 실행시 참조할 페이지가 주기억장치에 없는 현상
4. 지역성: 프로세스가 실행되는 동안 주기억장치를 참조할 때 일부페이지만 집중적으로 참조하는 성질(워킹셋 이론 기반)
- 시간 구역성: 반복, 스택, 부 프로그램, 하나의 페이지를 일정 시간동안 집중적으로 액세스 하는 현상
- 공간 구역성: 일정 위치의 페이지를 집중적으로 액세스하는 현상
5. 워킹셋 : 프로세스가 일정시간동안 자주 참조하는 페이지들의 집합 working set 
6. 스래싱: thrashing, 프로세스 처리 시간보다 페이지 교체에 소요되는 시간이 더 많아지는 현상
7. 페이지 교체 알고리즘
  - FIFO
  - OPT(계산은 없음): 앞으로 가장 사용되지 않을 페이지를 교체
  - LRU(least recentyl used) : 최근에 가장 오랫동안 사용되지 않은 참조페이지를 교체
  - LFU(least frequently used) : 사용빈도가 가장 적은 참조페이지를 교체
  - NUR(not used recently) : 참조비트/변형비트, 최근의 사용여부를 확인하기 위해 각 페이지마다 두개의 비트 사용
  - SCR(second chance replacement) : fifo 단점 보완 기법



## 프로세스
1. 프로세스: 실행되고 있는 컴퓨터 프로그램
2. 스레드: 프로세스 내에서 실행되는 흐름의 단위, 경량 프로세스
3. 프로세스 상태 전이 : 생성 -> 준비(ready) -> 디스패치 -> 실행(run) -> 종료(exit)
실행(run)->대기(wait)->wake up -> 준비(ready)
- 준비: 대기 큐에서 프로세서를 할당받기 위해 기다리는 상태
- 실행: 프로세스가 프로세서를 할당받아 실행되는 상태, 수행이 완료되기 전에 할당 시간이 종료되면 프로세스는 다시 준비상태로 간다.
- 대기: 실행을 중단시키고 I/O처리가 끝날때까지 대기중인 상태
- 종료: 프로세스 실행이 끝나고 프로세스 할당이 해제된 상태
- 준비-> 실행(디스패치, dispatch)
- 실행->준비(time run out)
- 실행->대기->준비(WAKE UP)
- spooling: 입출력 데이터를 모아뒀다가 한꺼번에 입출력
- PCB : process control block, 운영체제가 프로세스에 대한 정보를 저장해놓는 공간
- 각 프로세스가 생성될 때마다 고유한 PCB가 생성되고 프로세스가 완료되면 PCB 제거 ->문맥교환
- 문맥교환 Context switching : 준비 -> 실행 왔다갔다 하는 것, 이전 프로세스 상태르 PCB에 보관하고 또다른 프로세스의 정보를 PCB에서 읽어 레지스터에 적재하는 과정
- PCB가 있기 때문에 문맥교환이 가능하다.
4. 프로세스 스케줄링
- 스케줄링: 메모리에 올라온 프로세스들 중 어떤 프로세스를 먼저 처리할지 순서를 정하는 것
- 스케줄링의 목적: 공평성, 효율성, 안정성, 반응 시간 보장, 무한 연기(기아현상) 방지
5. 선점형 프로세스 스케줄링(preemptive) 
  - 다른 프로세스가 실행중이더라도 운영체제가 CPU를 강제로 뺏을 수 있는 방식
  - 잦은 문맥 교환으로 오버헤드가 많이 발생함.
  - ROUND ROBIN , SRT , 다단계 큐, 다단계 피드백 큐

6. 비선점형 프로세스 스케줄링(Non-preemptive)
  - 프로세스가 CPU를 점유하고 있다면 이를 빼앗을 수 없는 방식
  - 낮은 문맥교환으로 오버헤드가 적다.
  - FCFS, SJF, HRN, 우선순위, 기한부 등
7. 기아현상: 시스템에 부하가 많아서 우선순위가 낮은 프로세스가 무한정 기다리는 현상(SJF, 우선순위, SRT, MLQ) 
8. 에이징 기법: 기아현상을 해결하기 위해 오랫동안 기다린 프로세스에게 우선순위를 높여주는 기법(HRN, MLFQ)
9. 스케줄링 알고리즘
  - 라운드 로빈: 시간단위를 정해서 프로세스를 순서대로 CPU를 할당하는 방식
  - **SRT**계산식 가장 어려움 : SJF를 선점형태로 변경, CPU점유시간이 가장 짧은 프로세스에 CPU를 먼저 할당하는 방식 / 도착시간 있음
  - MLQ : 프로세스를 특정 그룹으로 분류할 수 있을 경우 그룹에 따라 각기 다른 준비상태 큐를 사용, 계산식 없음
  - MLFQ : FCFS 순서로 CPU를 할당받아 실행되고 할당된 시간이 끝나면 다음 단계 준비큐로 이동함, 가장 하위는 라운드 로빈 방식으로 운영됨

10. 프로세스 스케줄링(비선점)
  - FCFS(FIFO) **계산식** : 먼저 도착한 프로세스를 먼저 처리하는 스케줄링 알고리즘. (최대/최소 평균반환시간 구하기) 대기+실행 = 반환시간 / 도착시간같은 거 없음
  - SJF: 실행시간이 가장 짧은 프로세스에게 CPU 할당하는 방식, 기아현생 발생.
  - HRN: 우선순위 = (대기시간 + 서비스시간) / 서비스시간 => 긴 시간이 먼저 처리된다.
  - 우선순위: 프로세스에게 우선순위를 줘서 높은 우선순위부터 자원할당
  - 기한부: 일정한 시간을 주어 시간안에 완료하지 못하면 다시 수행하게 하는 기법


## 병행 프로세스와 교착상태
1. 병행프로세스 문제해결책: 임계구역, 상호배제 기법, 동기화 기법
  - 임계구역: Critical section, 한 순간에는 반드시 하나의 프로세스만 사용되도록 지정한 영역
  - 상호배제(mutual exclusion) : 하나의 프로세스가 공유~ 를 사용할때 다른 프로세스들이 사용하지 못하도록 배제시키는 제어기법
    - 데커, 피터슨, 다익스트라, 램포트의 베어커리 알고리즘이 있음.
2. 동기화기법 : 스레드들에게 하나의 자원에 대한 처리 권한을 주거나 순서를 조정해주는 기법 
    - 세마포어: 다익스트라가 제안했음. 수신호. 각 프로세스에 제어신호를 전달하여 순서대로 작업 수행하도록 하는 기법. p와 v 연산 (계수 세마포어, 이진 세마포어)
   - 모니터: 프로그래밍 언어 수준에서 동시성을 제어하며 타이밍 오류를 해결한 상호 배제 기법, wait , signal
3. 교착상태(dead Lock) 
  - 둘 이상의 프로세스들이 자원을 점유한 상태에서 서로 다른 프로세스가 점유하고 있는 자원을 요구하며 무한정 기다리는 현상
  - 교착상태 발생조건 : 상 점 비 환
  - 상호배제: mutual exclusion , 한번에 한개의 프로세스만 공유자원을 사용할 수 있어야 함
  - 점유 및 대기 : hold & wait, 자원을 점유하고 있으면서 다른 프로세스에 할당된 자원을 추가로 요구하며 대기
  - 비선점: nonpreemption , 프로세스에 할당된 자원은 사용이 끝날때까지 강제로 뺏을 수 없음
  - 환형대기: circular wait 각 프로세스가 순차적으로 다음 프로세스가 요구하고 있는 자원을 가지고 있는 상태
  - 예방기법, 회복기법, 회피기법(은행가 알고리즘), 발견기법 

## 디스크 스케줄링
1. 사용할 데이터가 디스크상의 여러 곳에 저장되어 있을 경우 데이터를 액세스 하기 위해 디스크 헤드를 움직이는 경로를 결정하는 기법이다. 
2. FCFS
3. SSTF : 현재 헤드와 가장 가까운 트랙의 요청을 먼저 처리한다.(Shortest seek time first) ==> 현재 헤드가 53이라고 본다면, 우선 큐의 내용을 정렬해주어야 함. 53에서 제일 가까운 것을 먼저 가고 그 다음이 65라면 65에서 또 가장 가까운
4. SCAN : 엘리베이터 알고리즘, 헤드의 진행방향 요청을 처리하고 다시 반대방향으로 틀어 반대방향에 있는 요청을 처리한다.
5. S-SCAN : 
6. LOOK : 스캔방식을 개선함. 더이상 요청이 없으면 방향을 틀어서 처리함.
7. C-LOOK
8. N-STEP SCAN : 나중에 나올때 처리
9. 에션바흐 기법 : 부하가 큰 항공 예약 시스템을 위해 개발


## 환경 변수와 로그 파일
1. 프로세스가 컴퓨터에서 동작하는 방식에 영향을 미치는 동적인 값들의 모임, 변수
2. 유닉스/리눅스 : env, set, printenv 명령어 사용하여 환경변수와 그에 따른 모든값 볼 수 있음. export명령을 이용하여 사용자 환경변수를 전역변수로 설정할 수 있다.
3. 윈도우 환경변수 : 커맨드/set
4. 로그: 시스템의 모든 기록을 담고 있는 데이터
5. 리눅스 로그 종류: xferlog(ftp), wtmp(전체 로그인 기록), utmp(현재 로그인 사용자 기록), btmp(로그인 실패 정보 기록)



## 정리
프로그램(HDD) 설치 >> 실행시키면 프로세스(주기억장치, 메모리) >> 프로세서(CPU)가 프로세스를 처리함.
반입 -> 배치(최초,최적,최악) -> 교체(FIFO,OPT,LRU,LFU,NUR,SCR)
교체 => 가상기억장치 만듦. (페이징기법, 세그멘테이션 기법) -> 단편화(내부,외부)
스레싱 -> 페이지 교체에 시간이 더 많이 걸리는 것. 극복: 워킹셋(지역성 이용)
프로세스(코드영역, 데이터영역,스택영역, 힙영역) : 하나 이상의 스레드로 구성됨
상태전이도: 준비 - 실행(->디스패치 <-타임런아웃), 정보를 저장해두는 것 PCB(process controll block)
문맥교환(context switching) : PCB 정보를 이용해서 문맥교환을 함.
IO,인터럽트 걸리면 실행에서 대기상태로 가짐. 대기->준비상태 될때 Wake up 
PCB, 시스템 카탈로그, 파일 디스크립터 == > 알아서 만들어지는 것들


## 스토리지
1. 컴퓨터에 데이터를 저장하는 저장소의 역할을 수행하는 부품
2. 스토리지 종류: DAS, NAS, SAN
  - DAS: direct attachted storage , PC나 서버에 직접 꽂아서 사용하는 스토리지
  - NAS: NETWORK ATTACHED storage, 서버와 장치가 이더넷 등을 이용해 네트워크에 연결된 방식.
  - SAN: storage area network , 서버와 저장장치를 광채널로 연결한 고속데이터 네트워크. 전용 광채널을 두며 빠른속도 연결 유지
3.  RAID: 복수의 하드디스크를 하나의 드라이브와 같이 인식하고 표기하는 것. 고속화 기대.
  - 스트라이핑: 연속된 데이터들이 물리적으로 여러개의 디스크에 라운드 로빈방식으로 저장됨.
  - 미러링: 데이터를 그대로 복제하는 것으로 신뢰성, 가용성 확보를 위해 사용됨.
  - Redundant array of inexpensive disks
4. RAID의 형태
  - RAID-0: 빠른 입출력을 위해 스트라이핑 방식 사용, 디스크의 모든 용량을 사용함.
  - RAID-1: 미러링 구성, 두개 이상의 디스크를 하나의 디스크처럼 사용함. 데이터를 복제하기 때문에 가용량은 절반.
  - RAID-2: 오류 정정을 위한 해밍코드를 사용하는 방식
  - RAID-3: 하나의 디스크는 패리티 정보를 위해 사용, 나머지 디스크에 데이터를 **균등**하게 분산 저장
  - RAID-4: 패리티 정보를 독립된 디스크에 저장, **블록 단위**로 분산 저장
  - RIAD-5: 3개 이상의 디스크를 붙여 하나처럼 사용하고 각각 디스크에 패리티 정보를 가짐.
  - RAID-6: 하나의 패리티를 두개의 디스크에 분산저장하는 방식
